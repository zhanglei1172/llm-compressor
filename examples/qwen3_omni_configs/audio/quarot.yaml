quant_stage:
  quant_modifiers:
    SpinQuantModifier:
      backe_mean: True
      rotations: ["R1", "R2"]
      transform_block_size: 64
      transform_type: "hadamard"
    # SmoothQuantModifier:
    #   smoothing_strength: 0.8
    QuantizationModifier:
      ignore: ["re:lm_head", "re:visual.*", "re:model.visual.*", "re:positional_embedding"]
      config_groups:
        group_0:
          weights:
            observer: mse
            observer_kwargs:
              maxshrink: 0.1
              patience: 10
              averaging_constant: 0.05
              grid: 128.0
              norm: 2.0
            num_bits: 4
            type: int
            symmetric: true
            strategy: channel
          # input_activations: {num_bits: 8, type: int, symmetric: true, strategy: token, dynamic: true}
          targets: [Linear, Conv2d]
